{% extends "allergyworld/base.html" %}
{% load bootstrap_pagination %}
<!-- search.html -->
{% block title %}
Search Results
{% endblock %}

{% block body %}
<div class="container">
  <div class="row clearfix">
    <div class="col-md-12 column">
      <br/><br/>

      <center>
          <form role="form" class="form-inline" action='/allergyworld/search/' method='get'>
            <div class="form-group" >
               <input list="allergies" class="form-control" name="allergy" placeholder="Allergy"/>
                <datalist id="allergies">
            <option value="Gluten">
            <option value="Nuts">
            <option value="Lactose">
            <option value="Egg">
            <option value="Shell fish">
          </datalist>
            </div>
            <div class="form-group" >
               <input type="text" class="form-control" name="location" required placeholder="Location" />
            </div>
            <div class="form-group" >
               <input list="cuisines" class="form-control" name="cuisine" placeholder="Cuisine" />
                <datalist id="cuisines">
            <option value="American">
            <option value="Chinese">
            <option value="Indian">
            <option value="Italian">
            <option value="Mexican">
          </datalist>
            </div>
            <div class="form-group">
             <button type="submit" class="btn btn-default" style="background-color:rgb(144,202,79)">
              <span class="glyphicon glyphicon-search"></span> Search</button>
           </div>
          </form>
        </center>
      
    </div>
  </div>
  <hr/>
  {% block results %}
  <div class="row clearfix">
    <div class="col-md-12 column">
      <div class="row clearfix">
        <div class="col-md-4 column">
        </div>
        <div class="col-md-4 column">
          <h3>
            <p>You searched for <strong>{{ query }}</strong></p>
          </h3>
        </div>
        <div class="col-md-4 column">
        </div>
      </div>
      {% if results %}
          
      <div class="row clearfix">
          <div class="col-md-4 column">
          </div>
          <div class="col-md-4 column">
            <p>Found {{ total_num }} restaurant{{ results|pluralize }}.</p>
          </div>
          <div class="col-md-4 column">
          </div>
      </div>
       
        {% for result,dist in results %}
        
        <div class="row clearfix">
          <div class="col-md-4 column">
          </div>
          <div class="col-md-4 column">
            <a href="{% url 'allergyworld:details' result.id %}">
                <h4>{{ result.name }}</h4></a>
                <p><h5>{{ dist }} miles away</h5></p>
          </div>
          <div class="col-md-4 column">
          </div>
        </div>
        
        {% endfor %}
        
      {% else %}
        <div class="row clearfix">
          <div class="col-md-4 column">
          </div>
          <div class="col-md-4 column">
            <p>Sorry, no restaurants matched your search criteria.</p>
          </div>
          <div class="col-md-4 column">
          </div>
        </div>
        
      {% endif %}
      
      <div class="row clearfix">
        <div class="col-md-4 column">
        </div>
        <div class="col-md-4 column">
          {% bootstrap_paginate results %}
        </div>
        <div class="col-md-4 column">
        </div>
      </div>
    </div>
  </div>
  {% endblock %}

  <div class="row clearfix">
    <div class="col-md-12 column">
    </div>
  </div>
</div>
{% endblock %}


